<!DOCTYPE html>
<html>
	
<!-- Mirrored from jwc.swjtu.edu.cn/web/date.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 May 2021 13:50:52 GMT -->
<head>
		<meta charset="UTF-8">
		<title>学校校历-VATUU为途教学信息服务平台</title>
		<meta name="keywords" content="VATUU,为途,教学信息服务平台,教务管理系统,教务网,教务系统" />
		<meta name="description" content="VATUU为途，专注于高等教育信息化，中国领先的教学信息化解决方案服务商" />
		<link rel="stylesheet" type="text/css" href="../css/web/iecommon.css"/>
		<style type="text/css">
			body{
				font-size: 12px;
				font-family: '宋体';
			}
			td{
				text-align: center;
				font-size:14px;
				line-height: 24px;
			}
			table{
				border-collapse: collapse;
			}
			/**
			 * 设置日历的大小
			 */
			.calendar{
			  width: 390px;
			  display: block;
			}
			 
			/**
			 * 设置日历顶部盒子
			 */
			.calendar .calendar-title-box{
			  position: relative;
			  width: 100%;
			  height: 36px;
			  line-height: 36px;
			  text-align:center;
			  border-bottom: 1px solid #ddd;
			}
			 
			/**
			 * 设置上个月的按钮图标
			 */
			.calendar .prev-month {
			  position: absolute;
			  top: 12px;
			  left: 0px;
			  display: inline-block;
			  width: 0px;
			  height: 0px;
			  border-left: 0px;
			  border-top: 6px solid transparent;
			  border-right: 8px solid #999;
			  border-bottom: 6px solid transparent;
			  cursor: pointer;
			}
			.calendar td{
				font-size: 12px;
			}
			/**
			 * 设置下个月的按钮图标
			 */
			.calendar .next-month {
			  position: absolute;
			  top: 12px;
			  right: 0px;
			  display: inline-block;
			  width: 0px;
			  height: 0px;
			  border-right: 0px;
			  border-top: 6px solid transparent;
			  border-left: 8px solid #999;
			  border-bottom: 6px solid transparent;
			  cursor: pointer;
			}
			 
			 .tdStyle{
			 	font-size: 150%; 
			 	font-weight: bold; 
			 	padding: 10px 0;
			 }
			/* 设置日历表格样式 */
			.calendar-table{
			  width: 100%;
			  border-collapse: collapse;
			  text-align:center;
			}
			 
			/* 表格行高 */
			.calendar-table tr{
			  height: 25px;
			  line-height: 25px;
			}
			 
			/* 当前天 颜色特殊显示 */
			.currentDay {
			  color: red;
			}
			 
			/* 本月 文字颜色 */
			.currentMonth {
			  color: #999;
			}
			 
			/* 其他月颜色 */
			.otherMonth{
			  color: #ede;
			}
			
			.weekStyle{
				color: blue;
			}
			.calendar td,.calendar th{
				border: 1px solid #ccc;
			}
			.yellow{
				color: yellow;
			}
			#termMemo2,#termMemo1{padding-top:10px}
		</style>
	</head>
	<body>
		<div style="width: 800px; margin: 0 auto; padding-bottom:20px;">
			<h1 id="termTitle" style="text-align: center; margin: 20px; font-size: 27px;">西南交通大学年校历</h1>
			<hr />
			<table border="0" cellspacing="0" cellpadding="0" width="800">
				<tr>
					<td style="vertical-align: top;">
						<table  border="0" cellspacing="0" cellpadding="0" width="390">
							<tr>
								<td class="tdStyle" id="firstTitle">第一学期日历</td>
							</tr>
							<tr>
								<td>
									<div class='calendar'  id='calendar'>
										
									</div>
								</td>
							</tr>
							<tr>
								<td style="text-align: left" id="termMemo1"></td>
							</tr>
						</table>
					</td>
					<td style="vertical-align: top;">
						<table border="0" cellspacing="0" cellpadding="0" width="390">
							<tr>
								<td class="tdStyle"  id="secondTitle">第二学期日历</td>
							</tr>
							<tr>
								<td>
									<div class='calendar' id='calendar2'></div>
								</td>
							</tr>
							<tr>
								<td  style="text-align: left" id="termMemo2"></td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
			 
		</div>
		<div style="width: 800px; margin: 0 auto; padding-bottom:20px;">
		   <table width="100%" border="0" cellspacing="0" cellpadding="0">
		     <tr>
			     <td height="30"><hr></td>
		     </tr>
             <tr>
			     <td height="40" style="text-align:left;"><span style="font-size: 18px; font-weight: 700">作息时间安排</span></td>
		     </tr>
		      
			  <tr>
			    <td bgcolor="#A3CEE2"><table width="100%" border="1" cellSpacing="0" borderColorLight="#000000" borderColorDark="#FFFFFF" cellPadding="0">
			      <tr>
			        <td width="187" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US"> </span></td>
			        <td width="154" align="center" bgcolor="#FFFFFF"><strong>讲 次</strong></td>
			        <td width="175" height="28" align="center" bgcolor="#FFFFFF"><strong>节 次</strong></td>
			        <td width="217" height="28" align="center" bgcolor="#FFFFFF"><strong>起止时间</strong></td>
			      </tr>
			      <tr>
			        <td rowspan="5" align="center" bgcolor="#FFFFFF">上<span lang="EN-US" xml:lang="EN-US"> </span>午
 			         <span lang="EN-US" xml:lang="EN-US">08:00-12:15</span></td>
 			       <td rowspan="2" align="center" bgcolor="#FFFFFF">第一讲</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">01</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">08:00-08:45</span></td>
 			     </tr>
 			     <tr>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">02</span>节</td>
			        <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">08:50-09:35</span></td>
 			     </tr>
 			     <tr>
 			       <td rowspan="3" align="center" bgcolor="#FFFFFF">第二讲</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">03</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">09:50-10:35</span></td>
 			     </tr>
  			    <tr>
  			      <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">04</span>节</td>
  			      <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">10:40-11:25</span></td>
  			    </tr>
  			    <tr>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">05</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">11:30-12:15</span></td>
 			     </tr>
 			     <tr>
 			       <td rowspan="5" align="center" bgcolor="#FFFFFF">下<span lang="EN-US" xml:lang="EN-US"> </span>午
  			        <span lang="EN-US" xml:lang="EN-US">14:00-18:15</span></td>
  			      <td rowspan="2" align="center" bgcolor="#FFFFFF">第三讲
  			        <p align="left"><span lang="EN-US" xml:lang="EN-US"> </span></td>
  			      <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">06</span>节</td>
  			      <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">14:00-14:45</span></td>
  			    </tr>
  			    <tr>
  			      <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">07</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">14:50-15:35</span></td>
  			    </tr>
  			    <tr>
  			      <td rowspan="3" align="center" bgcolor="#FFFFFF">第四讲</td>
  			      <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">08</span>节</td>
  			      <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">15:50-16:35</span></td>
  			    </tr>
  			    <tr>
  			      <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">09</span>节</td>
  			      <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">16:40-17:25</span></td>
  			    </tr>
  			    <tr>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">10</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">17:30-18:15</span></td>
  			    </tr>
  			    <tr>
  			      <td rowspan="3" align="center" bgcolor="#FFFFFF">晚<span lang="EN-US" xml:lang="EN-US"> </span>上
			          <span lang="EN-US" xml:lang="EN-US">19:30-21:55</span></td>
 			       <td rowspan="3" align="center" bgcolor="#FFFFFF">第五讲</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">11</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">19:30-20:15</span></td>
 			     </tr>
 			     <tr>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">12</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">20:20-21:05</span></td>
 			     </tr>
 			     <tr>
 			       <td height="28" align="center" bgcolor="#FFFFFF">第<span lang="EN-US" xml:lang="EN-US">13</span>节</td>
 			       <td height="28" align="center" bgcolor="#FFFFFF"><span lang="EN-US" xml:lang="EN-US">21:10-21:55</span></td>
 			     </tr>
 			   </table></td>
			  </tr>
			</table>
		</div>
        <script src="../js/web/about.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			  //使用ajax获取服务器上现在的时间以及开始时间
			  
			  dateAjax();
			  function showSchoolDate(beginDate,parent,oWeeks){
					  /*
				   * 用于记录日期，显示的时候，根据dateObj中的日期的年月显示
				   */
				   var nowTime = nowTime;
				   var dateObj = (function(){
					//
				    var _date = new Date(Date.parse(new Date(beginDate.replace(/-/g,"../index-2.html"))));// 默认为当前系统时间，使用服务器上时间
				    return {
				      getDate : function(){
				        return _date;
				      },
				      setDate : function(date) {
				        _date = date;
				      }
				    };
				  })();
				 
				  // 设置calendar div中的html部分
				  renderHtml(parent);
				  // 表格中显示日期
				  showCalendarData(oWeeks,parent);
				 
				  /**
				   * 渲染html结构
				   */
				  function renderHtml(parent) {
				    var calendar = document.getElementById(parent);
//				    var titleBox = document.createElement("div");  // 标题盒子 设置上一月 下一月 标题
				    var bodyBox = document.createElement("div");  // 表格区 显示数据
				 
				    // 设置表格区的html结构
				    bodyBox.className = 'calendar-body-box';
				 
				    
		
				    bodyBox.innerHTML = "<table id='calendarTable"+parent+"' class='calendar-table'>" +
				          
				              "</table>";
				    // 添加到calendar div中
				    calendar.appendChild(bodyBox);
				  }
				 
				  /**
				   * 表格中显示数据，并设置class
				   */
				   var nowMonth = "";
				   var nowYear = "";
				  function showCalendarData(oWeek,parent) {
				    var _year = dateObj.getDate().getFullYear();
				    var _month = dateObj.getDate().getMonth() + 1;
				    var _day =  dateObj.getDate().getDate();
				    var _dateStr = getDateStr(dateObj.getDate());
				    nowMonth = _month;
				    nowYear = _year;
				    // 设置表格中的日期数据
				    var _table = document.getElementById("calendarTable"+parent);
				    var _tds = _table.getElementsByTagName("td");
				    var _firstDay = new Date(_year, _month - 1, _day);  // 当前月第一天
				    var str = "";
				    var strTr = "<td>"+_month+"月</td>";
				    var weekCount = 1;
				    //设置每个td的内容
				    var week = _firstDay.getDay();
				    week = week==0?7:week;
				    for(var i=1;i<week;i++){
				    	strTr +='<td></td>';
				    }
				    //循环22周的天数
				    for(var i = 0; i < oWeeks*7; i++) {
				      var _thisDay = new Date(_year, _month - 1, i + _day);
				      var _thisDayStr = getDateStr(_thisDay);
				      week = _thisDay.getDay();
				   	  week = week==0?7:week;
				      //计算是否是下个月
				      if(nowMonth != Number(_thisDay.getMonth())+1){
				      	//判断是否是周末
				      	if(week!=1){
				      		//计算占位空格
			      			var temp1 = 7-week+1;
					      	var temp2 = week-1;
					      	for(var j=0;j<temp1;j++){
					      		strTr += '<td></td>';
					      	}
					      	str += '<tr>'+strTr+'<td class="weekStyle">第'+weekCount+'周</td></tr>';
					      	if(nowYear != _thisDay.getFullYear()){
					      		strTr = "<td>"+_thisDay.getFullYear()+"年"+ (_thisDay.getMonth()+1)+"月</td>";
					      	}else{
				      			strTr = "<td>"+(_thisDay.getMonth()+1)+"月</td>";
				      		}
					      	for(var j=0;j<temp2;j++){
					      		strTr += '<td></td>';
					      	}
				      	}
						nowMonth = _thisDay.getMonth()+1;
				      }
				      var weekendClass = "";
				      if(week==7||week==6){
				      	weekendClass=' class="currentDay" '
				      }
			          strTr += '<td date="'+_thisDayStr+'" '+weekendClass+'>'+_thisDay.getDate()+'</td>'
			    	  if(week==7){
				      	str += '<tr>'+strTr+'<td class="weekStyle">第'+weekCount+'周</td></tr>';
				      	//判断是否是同一年，如果不是同一年，则加上年份
			      		if(nowYear != _thisDay.getFullYear()){
				      		strTr = "<td>"+_thisDay.getFullYear()+"年"+ (_thisDay.getMonth()+1)+"月</td>";
				      	}else{
			      			strTr = "<td>"+(_thisDay.getMonth()+1)+"月</td>";
			      		}
				      	weekCount++;
				      }
				    }
				 /*    var _tableHTML = _table.innerHTML;
				    setTableInnerHTML(_table,_tableHTML + str);  */
				    //_table.innerHTML = str;
				   	// console.log(_table.innerHTML)
				    setTableInnerHTML(_table,str,parent)
				  }
				
				  /**
				   * 日期转化为字符串， 4位年+2位月+2位日
				   */
				  function getDateStr(date) {
				    var _year = date.getFullYear();
				    var _month = date.getMonth() + 1;    // 月从0开始计数
				    var _d = date.getDate();
				    _month = (_month > 9) ? ("" + _month) : ("0" + _month);
				    _d = (_d > 9) ? ("" + _d) : ("0" + _d);
				    return _year + _month + _d;
				  }
			  } 
			//调用方法
			/* showSchoolDate("time","calendar");
			showSchoolDate("time","calendar2"); */
			
			//合并相同月份单元格
			function mc(tableId, startRow, endRow, col) { 
				var tb = document.getElementById(tableId).getElementsByTagName("tbody")[0];
				if(tb == undefined){
					tb = document.getElementById(tableId);
				}
			
				if (tb.rows[0] == undefined || col >= tb.rows[0].cells.length) { 
					return; 
				} 
				if (col == 0) { 
					endRow = tb.rows.length-1; 
				} 
				for (var i = startRow; i < endRow; i++) { 
					if (tb.rows[startRow].cells[col].innerHTML == tb.rows[i + 1].cells[0].innerHTML) { 
						tb.rows[i + 1].removeChild(tb.rows[i + 1].cells[0]); 
						tb.rows[startRow].cells[col].rowSpan = (tb.rows[startRow].cells[col].rowSpan | 0) + 1; 
						if (i == endRow - 1 && startRow != endRow) { 
							mc(tableId, startRow, endRow, col + 1); 
						} 
					} else { 
						mc(tableId, startRow, i + 0, col + 1); 
						startRow = i + 1; 
					} 
				} 
			}
			
			//删除左边表格多余周数，是左右校历行数相等
			function aa(tb1,tb2){
				var tab1 = document.getElementById('calendar').getElementsByTagName("table")[0];
				var tab2 = document.getElementById('calendar2').getElementsByTagName("table")[0] ;
				var tbody2 = tab2.getElementsByTagName("tbody")[0];
				var trs2 = tab2.getElementsByTagName("tr");
			      //表格行数
			      var rows1 = tab1.rows.length ;
			      var rows2 = tab2.rows.length ;
			      //倒叙删除
			      if(rows1 < rows2){
		    	 	 for(var i=rows2;i > rows1;i--){
			    	  	tbody2.removeChild(trs2[i-1]);
		    	  	  }
			      }
				
			}
			//innerhtml兼容性处理
			function setTableInnerHTML(table, html,parent) { 
				var _headHtml = "<tr>" + 
	              "<th>月份</th>" +
	              "<th>一</th>" +
	              "<th>二</th>" +
	              "<th>三</th>" +
	              "<th>四</th>" +
	              "<th>五</th>" +
	              "<th>六</th>" +
	              "<th>日</th>" +
	              "<th>周次</th>" +
	            "</tr>";
				if(navigator && navigator.userAgent.match(/msie/i)){ 
		            var bodyBox = "<table id='calendarTable"+parent+"' class='calendar-table'>" +
		              _headHtml + html +
		              "</table>";
				    var calendar = document.getElementById(parent);
				    calendar.innerHTML=bodyBox;
				}else { 
					table.innerHTML=_headHtml+html; 
				} 
				
			} 
		</script>
	</body>

<!-- Mirrored from jwc.swjtu.edu.cn/web/date.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 May 2021 13:50:52 GMT -->
</html>
